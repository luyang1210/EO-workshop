
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Dataset sampling &#8212; openEO Python Client 0.12.0a1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sharing of user-defined processes" href="udp_sharing.html" />
    <link rel="prev" title="Analysis Ready Data generation" href="ard.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dataset-sampling">
<h1>Dataset sampling<a class="headerlink" href="#dataset-sampling" title="Permalink to this heading">¶</a></h1>
<p>EXPERIMENTAL</p>
<p>Tested on:</p>
<ul class="simple">
<li><p>Terrascope</p></li>
</ul>
<p>A number of use cases do not require a full datacube to be computed,
but rather want to extract a result at specific locations.
Examples include extracting training data for model calibration, or computing the result for
areas where validation data is available.</p>
<p>Sampling a datacube in openEO currently requires polygons as sampling features. Other types of geometry, like lines
and points, should be converted into polygons first by applying a buffering operation. Using the spatial resolution
of the datacube as buffer size can be a way to approximate sampling at a point.</p>
<p>To indicate to openEO that we only want to compute the datacube for certain polygon features, we use the
<a class="reference internal" href="../api.html#openeo.rest.datacube.DataCube.filter_spatial" title="openeo.rest.datacube.DataCube.filter_spatial"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter_spatial()</span></code></a> method.</p>
<p>Next to that, we will also indicate that we want to write multiple output files. This is more convenient, as we will
want to have one or more raster outputs per sampling feature, for convenient further processing. To do this, we set
the ‘sample_by_feature’ output format property, which is available for the netCDF and GTiff output formats.</p>
<p>Combining all of this, results in the following sample code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s2_bands</span> <span class="o">=</span> <span class="n">auth_connection</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="s2">&quot;TERRASCOPE_S2_TOC_V2&quot;</span><span class="p">,</span>
                                           <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;B04&quot;</span><span class="p">],</span>
                                           <span class="n">temporal_extent</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2020-05-01&quot;</span><span class="p">,</span><span class="s2">&quot;2020-06-01&quot;</span><span class="p">]</span>
                                           <span class="p">)</span>
<span class="n">s2_bands</span> <span class="o">=</span> <span class="n">s2_bands</span><span class="o">.</span><span class="n">filter_spatial</span><span class="p">(</span><span class="s2">&quot;https://artifactory.vgt.vito.be/testdata-public/parcels/test_10.geojson&quot;</span><span class="p">)</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">s2_bands</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sentinel2&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Sentinel-2 L2A bands&quot;</span><span class="p">,</span><span class="n">out_format</span><span class="o">=</span><span class="s2">&quot;netCDF&quot;</span><span class="p">,</span><span class="n">sample_by_feature</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Sampling only works for batch jobs, because it results in multiple output files, which can not be conveniently transferred
in a synchronous call.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">openEO Python Client</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Open-EO&repo=openeo-python-client&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">openEO Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_access.html">Finding and loading data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../processes.html">Working with processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_jobs.html">Batch Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../udp.html">User-Defined Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth.html">Authentication and Account Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../udf.html">User-Defined Functions (UDF) explained</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datacube_construction.html">DataCube construction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machine_learning.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">openEO CookBook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ard.html">Analysis Ready Data generation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Dataset sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="udp_sharing.html">Sharing of user-defined processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectral_indices.html">Spectral Indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="tricks.html">Miscellaneous tips and tricks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process_mapping.html">openEO Process Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../best_practices.html">Best practices, coding style and general tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">openEO CookBook</a><ul>
      <li>Previous: <a href="ard.html" title="previous chapter">Analysis Ready Data generation</a></li>
      <li>Next: <a href="udp_sharing.html" title="next chapter">Sharing of user-defined processes</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- Alabaster (krTheme++) Hacks -->

<div class="sidebar-meta">
<h3>Meta</h3>
<div>Docs for openEO Python Client</div>
<div>Version: <code>0.12.0a1</code></div>
<div>Last updated: 2022/08/26</div>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017 - 2022, Jeroen Dries.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/cookbook/sampling.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/Open-EO/openeo-python-client" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>